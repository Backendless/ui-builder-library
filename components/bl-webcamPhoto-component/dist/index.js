!function(e, t){if('object'==typeof exports&&'object'==typeof module)module.exports=t();else if('function'==typeof define&&define.amd)define([], t);else{const a=t();for(const n in a)('object'==typeof exports?exports:e)[n]=a[n]}}(self, (() => (() => {'use strict';var e={ d:(t, a) => {for(const n in a)e.o(a, n)&&!e.o(t, n)&&Object.defineProperty(t, n, { enumerable:!0, get:a[n] })}, o:(e, t) => Object.prototype.hasOwnProperty.call(e, t), r:e => {'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e, Symbol.toStringTag, { value:'Module' }), Object.defineProperty(e, '__esModule', { value:!0 })} }, t={};e.r(t), e.d(t, { default:() => s });const a=self.React;function n({ onClick:e, text:t }){return React.createElement('button', { className:'snapshot-button', onClick:e }, t)}function o({ onClick:e, text:t, disabled:a }){return React.createElement('button', { className:'done-button', onClick:e, disabled:a }, t)}async function r(e){return(await fetch(e)).blob()}function c({ setVisibility:e, component:t, eventHandlers:c }){const{ makeSnapshotButtonText:i, doneButtonText:l }=t, { onSaveImage:s }=c, d=(0, a.useRef)(), u=(0, a.useRef)(), [m, b]=(0, a.useState)(!1), f=(0, a.useCallback)((() => {u.current.getContext('2d').drawImage(d.current, 0, 0, 320, 240), b(!0)}), [u]), p=(0, a.useCallback)((() => {let t;e(!1), (t=d).current.srcObject.stop?t.current.srcObject.stop():t.current.srcObject.getTracks().forEach((e => e.stop()))}), []), g=(0, a.useCallback)((() => {r(u.current.toDataURL()).then((e => {s({ imageBlob:e })})), p()}), []), v=(0, a.useCallback)((e => {e.stopPropagation()}), []);return(0, a.useEffect)((() => {let e, t;e=d, t=p, navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia, navigator.getUserMedia&&navigator.webkitGetUserMedia({ video:!0 }, (t => {e.current.srcObject=t}), (e => {alert('For the application to work, you must provide access to the camera'), t()}))}), []), React.createElement('div', { className:'modal', onClick:p }, React.createElement('div', { className:'modal__content', onClick:v }, React.createElement('div', { className:'modal__images' }, React.createElement('video', { ref:d, autoplay:'autoplay', width:'320', height:'240' }), React.createElement('canvas', { ref:u, width:'320', height:'240' })), React.createElement('div', { className:'modal__button-container' }, React.createElement(n, { onClick:f, text:i }), React.createElement(o, { onClick:g, text:l, disabled:!m }))))}function i({ onChange:e, reference:t, text:a, disabled:n }){return React.createElement('label', { className:'upload-button' }, a, React.createElement('input', { type:'file', onChange:e, ref:t, disabled:n }))}function l({ onClick:e, text:t, disabled:a }){return React.createElement('button', { onClick:e, className:'photo-button', disabled:a }, t)}function s({ component:e, eventHandlers:t }){const{ uploadButtonText:n, makePhotoButtonText:o, buttonDisabled:s }=e, { onSaveImage:d }=t, [u, m]=(0, a.useState)(!1), b=(0, a.useRef)(), f=(0, a.useCallback)((() => {m(!0)}), [u]), p=(0, a.useCallback)((async() => {let e;r(await(e=b.current.files[0], new Promise(((t, a) => {const n=new FileReader;n.readAsDataURL(e), n.onload=() => t(n.result), n.onerror=e => a(e)})))).then((e => {d({ imageBlob:e })}))}), []), g=(0, a.useMemo)((() => [/Android/i, /webOS/i, /iPhone/i, /iPad/i, /iPod/i, /BlackBerry/i, /Windows Phone/i].some((e => navigator.userAgent.match(e)))), []);return React.createElement('div', { className:'bl-customComponent-webcamPhoto' }, g?React.createElement(i, { onChange:p, text:n, reference:b, disabled:s }):React.createElement(l, { onClick:f, text:o, disabled:s }), u&&React.createElement(c, { setVisibility:m, component:e, eventHandlers:t }))}return t})()))