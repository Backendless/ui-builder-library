!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var o in a)("object"==typeof exports?exports:e)[o]=a[o]}}(self,(()=>(()=>{"use strict";var e={d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>b});const a=self.React,o="HANDLE_SUGGESTIONS_OPEN",n="HANDLE_INPUT_VALUE",l="HANDLE_AUTOCOMPLETE_VALUE",c="HANDLE_AUTOCOMPLETE_ACTIVE",s="HANDLE_AUTOCOMPLETE_DISABLE",u=(e,t)=>{switch(t.type){case o:return{...e,isSuggestionsOpen:t.value};case n:return{...e,inputValue:t.value};case l:return{...e,inputValue:"",autocompleteValue:t.value};case c:return{...e,isAutocompleteActive:!0};case s:return{...e,isAutocompleteActive:!1,isSuggestionsOpen:!1};default:return e}},r={isSuggestionsOpen:!1,isAutocompleteActive:!1,inputValue:"",autocompleteValue:null},i=(0,a.forwardRef)((({state:e,dispatch:t},a)=>{const{inputValue:l,autocompleteValue:c,isSuggestionsOpen:s}=e;let u;return u=c&&!l&&c?c?.label:l,React.createElement("div",{onClick:()=>t({type:o,value:!s}),className:"input__container"},React.createElement("input",{ref:a,type:"text",id:"autocomplete",autoComplete:"off",value:u,onChange:({target:{value:e}})=>{t({type:n,value:e}),t({type:o,value:!0})},className:"input__field"}))})),m=({label:e,state:t})=>{const{isAutocompleteActive:a,autocompleteValue:o}=t,n={transform:a||o?"translate(14px, -9px) scale(0.75)":"translate(14px, 16px) scale(1)"};return React.createElement("label",{htmlFor:"autocomplete",style:n,className:"label"},e)},p=({state:e,dispatch:t,onButtonClearClick:a})=>{const{isSuggestionsOpen:c}=e;return React.createElement("div",{className:"button-container"},e.autocompleteValue&&React.createElement("button",{tabIndex:"-1",type:"button",onClick:()=>{t({type:l,value:null}),t({type:n,value:""}),a&&a({autocompleteValue:null})},className:"button button__clear"},React.createElement("svg",{focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24",className:"icon"},React.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))),React.createElement("button",{tabIndex:"-1",type:"button",onClick:()=>{t({type:o,value:!c})},className:(()=>{const e=["button"];return c&&e.push("button__popup-up"),e.join(" ")})()},React.createElement("svg",{focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24",className:"icon"},React.createElement("path",{d:"M7 10l5 5 5-5z"}))))},d=({label:e,state:t})=>{const{autocompleteValue:a,isAutocompleteActive:o}=t,n={maxWidth:o||a?"100%":"0",transition:o||a?"max-width 100ms cubic-bezier(0, 0, 0.2, 1) 0ms":"max-width 50ms cubic-bezier(0, 0, 0.2, 1) 0ms"};return React.createElement("fieldset",{className:"fieldset"},React.createElement("legend",{style:n,className:"legend"},e))},f=(0,a.forwardRef)((({label:e,state:t,dispatch:o,onButtonClearClick:n},l)=>{const s=(0,a.useRef)(null);return React.createElement("div",{ref:l,onClick:()=>{s.current.focus(),o({type:c})},className:"autocomplete"},React.createElement(m,{label:e,state:t}),React.createElement("div",{className:"autocomplete__text-field"},React.createElement(i,{ref:s,state:t,dispatch:o}),React.createElement(p,{state:t,dispatch:o,onButtonClearClick:n}),React.createElement(d,{label:e,state:t})))})),v=({dispatch:e,item:t,onAutocompleteChange:a})=>React.createElement("div",{onClick:()=>{return e({type:l,value:n=t}),e({type:o,value:!1}),void(a&&a({autocompleteValue:n}));var n},className:"suggestion"},t.label),g=({state:e,autocompleteHeight:t,dispatch:o,onAutocompleteChange:n})=>{const{suggestions:l}=e,[c,s]=(0,a.useState)("bottom"),u=(0,a.useRef)(),r={inset:"top"===c?"auto auto 0 0":"0 auto auto 0",["top"===c?"marginBottom":"marginTop"]:"55px"};return(0,a.useLayoutEffect)((()=>{const e=()=>{const e=window.innerHeight,{bottom:a,height:o}=u.current.getBoundingClientRect();s((n=>e-("top"===n?a+t+o:a)>0?"bottom":"top"))};return e(),document.addEventListener("wheel",e),()=>document.removeEventListener("wheel",e)}),[t]),React.createElement("div",{ref:u,style:r,className:"suggestions"},l.length?l.map((e=>React.createElement(v,{key:e.label,item:e,dispatch:o,onAutocompleteChange:n}))):React.createElement("div",{className:"suggestion"},"No options"))};function b({component:e,eventHandlers:t}){const{label:o,suggestions:l}=e,{onAutocompleteChange:c,onButtonClearClick:i}=t,m=(0,a.useRef)(),p=(0,a.useRef)(),[d,v]=(e=>{const[t,o]=(0,a.useReducer)(u,r);return[(0,a.useMemo)((()=>{const a=e.filter((({label:e})=>e.toLowerCase().includes(t.inputValue.toLowerCase())));return{...t,suggestions:a}}),[t,e]),o]})((b=l)?"string"==typeof b?b.split(",").map((e=>({objectId:e,value:e,label:e}))):"object"==typeof b?Object.values(b):void 0:[]);var b;const E=p.current?.getBoundingClientRect()?.height,h=(0,a.useCallback)((()=>{v({type:s}),v({type:n,value:""})}),[v]);var y,R;return y=m,R=h,(0,a.useEffect)((()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&R(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[y,R]),React.createElement("div",{ref:m,className:(()=>{const{autocompleteValue:e,isAutocompleteActive:t}=d,a=["bl-customComponent-autocomplete"];return e&&a.push("has-clear-button"),t&&a.push("autocomplete-focused"),a.join(" ")})()},React.createElement(f,{ref:p,label:o,state:d,dispatch:v,onButtonClearClick:i}),d.isSuggestionsOpen&&React.createElement(g,{state:d,autocompleteHeight:E,dispatch:v,onAutocompleteChange:c}))}return t})()));