!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("./imask.min"),require("react"),require("./prop-types.min")):"function"==typeof define&&define.amd?define(["exports","./imask.min","react","./prop-types.min"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactIMask={},e.IMask,e.React,e.PropTypes)}(this,(function(e,t,n,r){"use strict";function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=u(t),o=u(n),f=u(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function c(e,t){if(null==e)return{};var n,r,u=function(e,t){if(null==e)return{};var n,r,u={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(u[n]=e[n]);return u}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var u=l(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return d(this,n)}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,u,a=[],o=!0,f=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){f=!0,u=e}finally{try{o||null==n.return||n.return()}finally{if(f)throw u}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k={mask:f.default.oneOfType([f.default.array,f.default.func,f.default.string,f.default.instanceOf(RegExp),f.default.oneOf([Date,Number,a.default.Masked]),f.default.instanceOf(a.default.Masked)]),value:f.default.any,unmask:f.default.oneOfType([f.default.bool,f.default.oneOf(["typed"])]),prepare:f.default.func,validate:f.default.func,commit:f.default.func,overwrite:f.default.oneOfType([f.default.bool,f.default.oneOf(["shift"])]),eager:f.default.bool,onAccept:f.default.func,onComplete:f.default.func,placeholderChar:f.default.string,lazy:f.default.bool,definitions:f.default.object,blocks:f.default.object,pattern:f.default.string,format:f.default.func,parse:f.default.func,autofix:f.default.oneOfType([f.default.bool,f.default.oneOf(["pad"])]),radix:f.default.string,thousandsSeparator:f.default.string,mapToRadix:f.default.arrayOf(f.default.string),scale:f.default.number,signed:f.default.bool,normalizeZeros:f.default.bool,padFractionalZeros:f.default.bool,min:f.default.oneOfType([f.default.number,f.default.instanceOf(Date)]),max:f.default.oneOfType([f.default.number,f.default.instanceOf(Date)]),dispatch:f.default.func,inputRef:f.default.func},v=Object.keys(k),b=["value","unmask","onAccept","onComplete","inputRef"],O=v.filter((function(e){return b.indexOf(e)<0}));function R(e){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(l,t);var n,r,u,f=m(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=f.call(this,e))._inputRef=t._inputRef.bind(p(t)),t}return n=l,r=[{key:"componentDidMount",value:function(){this.props.mask&&this.initMask()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=this._extractMaskOptionsFromProps(e);t.mask?this.maskRef?(this.maskRef.updateOptions(t),"value"in e&&(e.value!==this.maskValue||"string"!=typeof e.value&&""===this.maskRef.value&&!this.maskRef.el.isActive)&&(this.maskValue=e.value)):this.initMask(t):(this.destroyMask(),"value"in e&&(this.element.value=e.value))}},{key:"componentWillUnmount",value:function(){this.destroyMask()}},{key:"_inputRef",value:function(e){this.element=e,this.props.inputRef&&this.props.inputRef(e)}},{key:"initMask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._extractMaskOptionsFromProps(this.props);this.maskRef=a.default(this.element,e).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this)),"value"in this.props&&(this.maskValue=this.props.value)}},{key:"destroyMask",value:function(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)}},{key:"_extractMaskOptionsFromProps",value:function(e){var t=Object.assign({},e);return Object.keys(t).filter((function(e){return O.indexOf(e)<0})).forEach((function(e){delete t[e]})),t}},{key:"_extractNonMaskProps",value:function(e){var t=Object.assign({},e);return v.forEach((function(e){delete t[e]})),t}},{key:"maskValue",get:function(){return"typed"===this.props.unmask?this.maskRef.typedValue:this.props.unmask?this.maskRef.unmaskedValue:this.maskRef.value},set:function(e){e=null==e?"":e,"typed"===this.props.unmask?this.maskRef.typedValue=e:this.props.unmask?this.maskRef.unmaskedValue=e:this.maskRef.value=e}},{key:"_onAccept",value:function(e){this.props.onAccept&&this.maskRef&&this.props.onAccept(this.maskValue,this.maskRef,e)}},{key:"_onComplete",value:function(e){this.props.onComplete&&this.maskRef&&this.props.onComplete(this.maskValue,this.maskRef,e)}},{key:"render",value:function(){return o.default.createElement(e,Object.assign({},this._extractNonMaskProps(this.props),{inputRef:this._inputRef}))}}],r&&i(n.prototype,r),u&&i(n,u),Object.defineProperty(n,"prototype",{writable:!1}),l}(o.default.Component),n=e.displayName||e.name||"Component";return t.displayName="IMask(".concat(n,")"),t.propTypes=k,t}var g=["inputRef"],j=R((function(e){var t=e.inputRef,n=c(e,g);return o.default.createElement("input",Object.assign({},n,{ref:t}))})),M=o.default.forwardRef((function(e,t){return o.default.createElement(j,Object.assign({},e,{ref:t}))}));Object.defineProperty(e,"IMask",{enumerable:!0,get:function(){return a.default}}),e.IMaskInput=M,e.IMaskMixin=R,e.useIMask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onAccept,u=t.onComplete,o=n.useRef(null),f=n.useRef(null),i=n.useState(""),l=y(i,2),s=l[0],c=l[1],p=n.useState(""),d=y(p,2),m=d[0],h=d[1],k=n.useState(""),v=y(k,2),b=v[0],O=v[1],R=n.useCallback((function(){var e;null===(e=f.current)||void 0===e||e.destroy(),f.current=null}),[]),g=n.useCallback((function(e){f.current&&(O(f.current.typedValue),h(f.current.unmaskedValue),c(f.current.value),null==r||r(f.current.value,f.current,e))}),[r]),j=n.useCallback((function(){return f.current&&(null==u?void 0:u(f.current.value,f.current))}),[u]);return n.useEffect((function(){var t=o.current;if(!t||null==e||!e.mask)return R();var n=f.current;n?null==n||n.updateOptions(e):t&&null!=e&&e.mask&&(f.current=a.default(t,e),t.defaultValue!==f.current.value&&g())}),[e,R,g]),n.useEffect((function(){if(f.current){var e=f.current;return e.on("accept",g),e.on("complete",j),function(){e.off("accept",g),e.off("complete",j)}}}),[g,j]),n.useEffect((function(){var e=f.current;e&&e.value!==s&&(e.value=s)}),[s]),n.useEffect((function(){var e=f.current;e&&e.unmaskedValue!==m&&(e.unmaskedValue=m)}),[m]),n.useEffect((function(){var e=f.current;e&&(e.typedValue=b)}),[b]),n.useEffect((function(){return R}),[R]),{ref:o,maskRef:f,value:s,setValue:c,unmaskedValue:m,setUnmaskedValue:h,typedValue:b,setTypedValue:O}},Object.defineProperty(e,"__esModule",{value:!0})}));
